# ๐ MoonVPN - Step-by-Step Prompts for Project Setup

> ุงู ูุงู ูุฌููุนูโุง ุงุฒ ูพุฑุงููพุชโูุง ุฒูุฌุฑูโุง ู ูุงุฒโุจูุฏโุดุฏู ุงุณุช ฺฉู ุจุงุฏ ุจู ูุฏู Claude ุฏุฑ Cursor IDE ุฏุงุฏู ุดูุฏ ุชุง ูพุฑูฺู MoonVPN ุฑุง ุจูโุตูุฑุช ุฏููุ ุงููุ ู ููุธู ุชูุณุนู ุฏูุฏ. ูุฑ ูพุฑุงููพุช ุจุงุฏ ุฏููุงู ูุทุงุจู ูุณุชูุฏุงุช ุฑุณู ุงูุฌุงู ุดูุฏ ู ูุฏู ูุจุงุฏ ุจูโูฺโูุฌู ุฑุงูโุญู ุณุฑุฎูุฏ ุงุฑุงุฆู ุฏูุฏ. ุงฺฏุฑ ุฎุทุง ุง ุงุจูุงู ุฏุฑ ุงุฌุฑุง ุชุณฺฉ ูพุด ุขูุฏุ ุจุงุฏ ุชููู ฺฉุฑุฏู ู ุงุฒ ฺฉุงุฑุจุฑ ุณุคุงู ุจูพุฑุณุฏ.

๐ ูุญู ุงุฌุฑุง ูพุฑูฺู: `/root/moonvpn`
๐ ูุณุชูุฏุงุช ูุฑุฌุน (ูุจู ุงุฒ ุงุฌุฑุง ูุฑ ุชุณฺฉ ูุฑูุฑ ุดูุฏ):
- `docs/project-requirements.md`
- `docs/project-structure.md`
- `docs/database-structure.md`

๐ ูุญุท ุชูุณุนู Docker ู ุงุฌุฑุง ุชูุงู ุชุณุชโูุง ุจุงุฏ ููุท ุงุฒ ุทุฑู CLI ุจุง ุฏุณุชูุฑ `moonvpn` ุงูุฌุงู ุดูุฏ.

---

## ๐งญ Phase 1: Project Bootstrap & Docker Setup

### ๐งฉ Task 1.1: Create Project Directory Structure and Files
```
ูุทุงุจู ุฏูู ูุงู `docs/project-structure.md`ุ ุชูุงู ุฏุงุฑฺฉุชูุฑโูุง ู ูุงูโูุง ุงููู ูพุฑูฺู ุฑุง ุฏุฑ ูุณุฑ /root/moonvpn ุจุณุงุฒ.
ุฏุฑ ูุฑ ูุงู ููุท ฺฉ ฺฉุงููุช ุชูุถุญ ุจููุณ ุชุง ุจุฑุง ฺฉุฏููุณโูุง ุจุนุฏ ุขูุงุฏู ุจุงุดุฏ.
ูฺ ูุงู ุฎุงุฑุฌ ุงุฒ ุงู ุณุงุฎุชุงุฑ ูุจุงุฏ ุณุงุฎุชู ุดูุฏ.
```

### ๐งฉ Task 1.2: Initialize the Project with Poetry
```
ูุทุงุจู `docs/project-requirements.md`ุ ูพุฑูฺู ุฑุง ุจุง Poetry ุฑุงูโุงูุฏุงุฒ ฺฉู. ูุณุฎู Python = 3.12
ูุงู `pyproject.toml` ุฑุง ุจุณุงุฒ ูู ูพฺฉุฌ ูุตุจ ูฺฉู.
ูุงูโูุง ูพุงู `.env`, `README.md`, `.gitignore` ุฑุง ุจุณุงุฒ ู ุฏุฑ `.env` ููุท ููุงุฑุฏ ููุฑุฏูุงุฒ ูุงุฑุฏ ฺฉู (DB, REDIS, BOT_TOKEN).
```

### ๐งฉ Task 1.3: Create CLI Script - moonvpn
```
ุฏุฑ scripts/ ูุงู ุงุฌุฑุง `moonvpn` ุจุณุงุฒ ุจุง ูุงุจูุช ฺฉูุชุฑู docker-compose ุจุฑุง up/down/logs/migrate/init.
ุงู CLI ุจุงุฏ ุจุนุฏุงู ุฏุฑ ููู ูุฑุงุญู ุชูุณุนู ุงุณุชูุงุฏู ุดูุฏ.
```

### ๐งฉ Task 1.4: Setup Docker & Services
```
ูุงูโูุง `docker-compose.yml` ู `Dockerfile` ุฑุง ุจุณุงุฒ.
ุณุฑูุณโูุง: app (ุจุง Poetry)ุ mysqlุ redisุ phpmyadmin.
ุชูุธูุงุช ุจุฑ ุงุณุงุณ env ุจุงุดุฏ. ูฺ ูพูุฑุช ูุจุงุฏ ูุณุชููุงู ุจุง host ุชุฏุงุฎู ุฏุงุดุชู ุจุงุดุฏ.
```

---

## ๐งญ Phase 2: Database Models & Migrations

### ๐งฉ Task 2.1: Create Initial Models - users, panels
```
ูุทุงุจู `docs/database-structure.md`ุ ูุงูโูุง db/models/user.py ู db/models/panel.py ุฑุง ุจุณุงุฒ.
ูุฏูโูุง ุจุง SQLAlchemy ููุดุชู ุดููุฏ ู ุฏุฑ __init__.py ุซุจุช ุดููุฏ.
```

### ๐งฉ Task 2.2: Configure Alembic & Create First Migration
```
Alembic ุฑุง ุชูุธู ู ุงููู migration ุฑุง ุจุณุงุฒ.
ุฏุณุชูุฑ `moonvpn migrate` ุจุงุฏ ุฌุฏููโูุง ุฑุง ุงุฌุงุฏ ฺฉูุฏ.
```

---

## ๐งญ Phase 3: Bot & Aiogram Foundation

### ๐งฉ Task 3.1: Setup Aiogram Main Entry
```
ูุงู bot/main.py ุฑุง ุจุณุงุฒ. Token ุฑุง ุงุฒ `.env` ุจุฎูุงู.
ุณุงุฎุชุงุฑ ููุท ุดุงูู Dispatcher ู startup ุจุงุดุฏ.
```

### ๐งฉ Task 3.2: Create Start Command & User Registration
```
/start ุจุงุฏ user ุฑุง ุฏุฑ ุฏุชุงุจุณ ุซุจุช ฺฉูุฏ (ุฏุฑ ุตูุฑุช ุฌุฏุฏ ุจูุฏู) ู ุงุฒ keyboard ุณุงุฏู ุงุณุชูุงุฏู ฺฉูุฏ.
```

### ๐งฉ Task 3.3: Create /addpanel Command for Admin
```
ุงุทูุงุนุงุช ูพูู ุจุงุฏ ูุฑุญููโุง ฺฏุฑูุชู ู ุฏุฑ ุฌุฏูู panels ุฐุฎุฑู ุดูุฏ.
```

---

## ๐งญ Phase 4: Panel Connection & Inbound Sync

### ๐งฉ Task 4.1: Install and Use py3xui SDK
```
ูุทุงุจู `docs/project-requirements.md`:
- ูุฎุฒู `https://github.com/iwatkot/py3xui` ุฑุง ุจู ุนููุงู submodule ุง dependency ุงุถุงูู ฺฉู.
- ุฏุฑ ูุณุฑ `core/integrations/xui_client.py` ฺฉูุงุณ ุจููุณ ฺฉู ุงู SDK ุฑุง wrap ฺฉูุฏ.
- ุงุฒ ูุชุฏูุง ููุฌูุฏ ูุงููุฏ get_inboundsุ create_clientุ delete_client ุงุณุชูุงุฏู ฺฉู.
ูฺฉุชู ููู: ูฺ ูุงู ุงุฒ SDK ุฑุง ูุฑุงุด ูฺฉู.
ุงฺฏุฑ ุฏุฑ ูุตุจ ุง ุงุณุชูุงุฏู ุจู ูุดฺฉู ุจุฑุฎูุฑุฏุ ุงุฒ ฺฉุงุฑุจุฑ ุณุคุงู ุจูพุฑุณ ู ุฎูุฏุณุฑ ูุณุฑ ุฑุง ุนูุถ ูฺฉู.
```

### ๐งฉ Task 4.2: Sync Inbounds to DB
```
ุฏุฑ panel_service.py ูุชุฏ ุจุฑุง ฺฏุฑูุชู inbounds ุงุฒ ูุฑ ูพูู ู ุฐุฎุฑู ุฏุฑ ุฌุฏูู inbounds ุจููุณ.
ูุฏู ูุฑุจูุทู ูุทุงุจู `docs/database-structure.md` ุณุงุฎุชู ุดูุฏ ู migration ูู ุงูุฌุงู ฺฏุฑุฏ.
```

---

(โ ุงุฏุงูู ุฏุงุฑุฏ: ูุงุฒูุง ุจุนุฏ ุดุงูู ุชุนุฑู ูพููุ ุณูุงุฑุดุ ุฎุฑุฏุ ุชุญูู ฺฉุงููฺฏุ ุชุฎููุ ฺฉู ูพูู ู...)

