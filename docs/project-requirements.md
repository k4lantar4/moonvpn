# ๐ MoonVPN - Project Requirements (Final)

## ๐งฉ Project Goal
Create a full-featured Telegram-based VPN service management system using Python, Docker, and 3x-ui integration, with full role-based user access, wallet system, order tracking, notifications, and CLI automation.

---

## โ Key Functional Requirements

### 1. User Roles
- `user`: ุฎุฑุฏ ูพูู ู ูุดุงูุฏู ุงุทูุงุนุงุช ุงฺฉุงูุช ู ุชูุฏุฏ
- `admin`: ุงูุฒูุฏู ูพููุ ุชุนุฑู ูพููุ ุจุฑุฑุณ ุณูุงุฑุดุงุชุ ุชูุธูุงุช ุณุณุชู
- `reseller`: ูุฑูุดูุฏูโูุง ุจุง ุฏุณุชุฑุณ ูุญุฏูุฏุ ุงูฺฉุงู ูุฑูุด ุจุง ูพููโูุง ุชุฎูู ุฏุฑ ุขูุฏู

### 2. User Features
- ุซุจุชโูุงู ุฎูุฏฺฉุงุฑ ุจุง start
- ุฏุฑุงูุช ูพูู ุชุณุช ุฏุฑ ุตูุฑุช ูุนุงู ุจูุฏู
- ูุณุช ูพููโูุง ุจุฑ ุงุณุงุณ ููฺฉุดู
- ุฎุฑุฏ ูพูู ู ุฏุฑุงูุช ููฺฉ ฺฉุงููฺฏ ููุง
- ุชูุฏุฏ ุงฺฉุงูุชุ ุฑุณุช ุชุฑุงูฺฉ ู ุญุฐู ุฏุณุช ุชูุณุท ฺฉุงุฑุจุฑ
- ูุดุงูุฏู ุงุนุชุจุงุฑุ ุชุฑุงูฺฉ ุจุงููุงูุฏูุ ู ุชุงุฑุฎ ุงููุถุง

### 3. Admin Features
- ุงูุฒูุฏู ู ูุฏุฑุช ูพูู 3x-ui (ุชููุง ุชูุณุท admin)
- ูุงูุชูุฑูฺฏ ูุถุนุช ูพูู ู inbounds
- ุงุฌุงุฏุ ูุฑุงุด ู ุบุฑูุนุงู ฺฉุฑุฏู ูพููโูุง
- ูุฏุฑุช ุณูุงุฑุดุงุช ู ุชุฑุงฺฉูุดโูุง
- ูุฏุฑุช ฺฉุฏูุง ุชุฎููุ ุฏุฑุตุฏ/ุซุงุจุชุ ูุญุฏูุฏุชุ ุงููุถุง
- ููุชูฺฉุดู ฺฏุฑูู (ุงุทูุงุนโุฑุณุงู ุนููู)

### 4. Notifications
- ูพุงู ุจู ฺฉุงุฑุจุฑุงู ุฏุฑุจุงุฑู ุงุชูุงู ุญุฌู/ุชุงุฑุฎ
- ุงุฑุณุงู ุงุนูุงูโูุง ุฎุฑุฏ ูููู ุง ุฑุฏ ุณูุงุฑุด
- ุขูุงุฑ ฺฉู ูพุงูโูุง: ูููู / ูุงูููู / ุฏุฑ ุตู
- ุงุฑุณุงู ุจู ฺฉุงูุงู ุนููู ุง ุงุฏูู ุฏุฑ ุตูุฑุช ูุงุฒ

### 5. VPN Panel Integration
- ุงุชุตุงู ูุณุชูู ุจุง 3x-ui ูพูู ุงุฒ ุทุฑู py3xui
- ุฏุฑุงูุช ูุณุช inbounds
- ุณุงุฎุชุ ุญุฐูุ ุชูุฏุฏุ ู ุฑุณุช ุงฺฉุงูุช ฺฉุงุฑุจุฑุงู
- UUID ู config_url ฺฏุฑูุชูโุดุฏู ุงุฒ ูพูู ุฐุฎุฑู ูโุดูุฏ

### 6. Account Naming
- ุจุฑ ุงุณุงุณ ุงูฺฏู: `FR-Moonvpn-012[-01]`
- ุดูุงุฑูุฏู ุจุง ูุฑ ุงูุชูุงู ููฺฉุดู ุงูุฒุงุด ูโุงุจุฏ
- ฺฉุงุฑุจุฑุงู ูโุชูุงููุฏ ูุงู ุณูุงุฑุด ุจุฏููุฏ ุง ุงุฒ ูพุดโูุฑุถ ุงุณุชูุงุฏู ฺฉููุฏ

### 7. Location Switching Logic
- ุจุฑุฑุณ ุจุงูโูุงูุฏู ุญุฌู/ุฒูุงู
- ุณุงุฎุช ุงฺฉุงูุช ุฌุฏุฏ ุฏุฑ ูพูู ููุตุฏ
- ุงุฑุณุงู ููฺฉ ุฌุฏุฏ
- ุญุฐู ุงฺฉุงูุช ูุจู
- ุฐุฎุฑูโุณุงุฒ ุฏุฑ ุฌุฏูู `account_transfer`

### 8. Payment & Wallet System
- ฺฉู ูพูู ุฏุงุฎู ุจุง ุชุฑุงฺฉูุดโูุง ูุงุจู ูพฺฏุฑ
- ุฏุฑฺฏุงู ูุณุชูู (ูุซูุงู ุฒุฑูโูพุงู) + ุฏุณุช ฺฉุงุฑุช ุจู ฺฉุงุฑุช
- ุชุฎููโ ูุงุจู ุชูุธู ู ูุฏุฑุช ฺฉุงูู

### 9. Test Account Control
- ููุท ฑ ุจุงุฑ ุจุฑุง ูุฑ ูพูู/ฺฉุงุฑุจุฑ
- ุซุจุช ุฏุฑ ุฌุฏูู `test_account_log`

### 10. Deployment Requirements
- ุงุฌุฑุง ฺฉุงูู ุจุง Docker
- ุงุณุชูุงุฏู ุงุฒ `moonvpn` CLI ุจุฑุง ูุฏุฑุช:
  - ุงุฌุฑุง ุณุฑูุณโูุงุ ูุดุงูุฏู ูุงฺฏุ ุงูุฌุงู migrations
- ุฏุณุชุฑุณ ฺฏุฑุงูฺฉ ุจู ุฏุชุงุจุณ ุงุฒ ุทุฑู phpMyAdmin

---

## โ๏ธ Technologies
- Python 3.12+
- Aiogram 3.x
- SQLAlchemy 2.x
- Alembic
- Redis
- MySQL 8.3+
- Docker & Compose
- Poetry
- py3xui (3x-ui SDK)

---

## ๐ Security & Performance
- ุฏุณุชุฑุณ ุจุฑ ุงุณุงุณ ููุดโูุง
- ููุชุฑ ูพููโูุง ุจุฑ ุงุณุงุณ ููฺฉุดู
- ุฐุฎุฑู ููุท ุงุทูุงุนุงุช ุถุฑูุฑ ุงฺฉุงูุชโูุง ู ุชุฑุงูฺฉ ูุตุฑูโุดุฏู
- ุงุณุชูุงุฏู ุงุฒ Redis ุจุฑุง session ู caching
- ูุงฺฏโฺฏุฑ ุฏููุ ุงุฑูุฑ ููุฏููฺฏุ ููุชู ุจู ุงุฏูู ุฏุฑ ุฑุฎุฏุงุฏูุง

---

## ๐ Roadmap Summary (Phases)
1. ุฑุงูโุงูุฏุงุฒ ุณุงุฎุชุงุฑ ู ูพุงฺฏุงู ุฏุงุฏู
2. ุงุชุตุงู ุจู ูพูู ู ุชุณุช ุณุงุฎุช ุงฺฉุงูุช
3. ูพุงุฏูโุณุงุฒ ุฑุจุงุช ุจุง ุฎุฑุฏ ูพูู ฺฉุงูู
4. ูุฏุฑุช ุณูุงุฑุด ู ฺฉู ูพูู
5. ููุชูฺฉุดูุ ุชุณุช ุงฺฉุงูุช ู ุชุฎูู
6. ูพูู ุงุฏูู ู ุงูฺฉุงูุงุช ูฺฉูู

