# ๐๏ธ MoonVPN - Project Directory Structure

> Updated: 2025-04-21

ุณุงุฎุชุงุฑ ุฏุงุฑฺฉุชูุฑ MoonVPN ุทูุฑ ุทุฑุงุญ ุดุฏู ฺฉู ุชูุณุนูโูพุฐุฑุ ุชูุฒุ ู ูุงุจู ููู ุจุฑุง ูุฑ ุชูุณุนูโุฏููุฏู ุง ูุฏู ููุด ูุตููุน ุจุงุดุฏ. ุชูุงู ูุงูโูุง ุฏุฑ ูุญู ูุดุฎุต ู ูุฌุงุฒ ูุฑุงุฑ ุฏุงุฑูุฏ.

---

## ๐ Root Directory: `/root/moonvpn`

| Path | ุชูุถุญ |
|------|-------|
| `.env` | ุชูุธูุงุช ูุญุท ุจุฑุง ฺฉู ุณุณุชู |
| `docker-compose.yml` | ุงุฌุฑุง ุชูุงู ุณุฑูุณโูุง ุฏุฑ ุฏุงฺฉุฑ |
| `Dockerfile` | ุชุตูุฑ ุงูพูฺฉุดู ุงุตู ูพุงุชูู (poetry) |
| `pyproject.toml` | ูพฺฉุฑุจูุฏ ูพูุชุฑ ู ูุงุจุณุชฺฏโูุง |
| `README.md` | ุชูุถุญ ฺฉู ูพุฑูฺู |
| `scripts/moonvpn.sh` | CLI ูุฏุฑุช ูพุฑูฺู ุจุง ุฏุณุชูุฑุงุช ูุซู `moonvpn restart` |

---

## ๐ค bot/

| Path | ููุด |
|------|-----|
| `bot/main.py` | ุงุฌุฑุง ุฑุจุงุช Aiogram |
| `bot/commands/` | ุฏุณุชูุฑุงุช ุงุตู ุฑุจุงุช (start, buy, wallet, etc.) |
| `bot/callbacks/` | ููุฏูุฑูุง ุฏฺฉููโูุง ุงููุงู |
| `bot/buttons/` | ุฏฺฉููโูุง ุงููุงู ุณูุงุฑุด ุจุฑุง ูุฑ ุจุฎุด |
| `bot/keyboards/` | ุฏฺฉููโูุง Reply ุจุฑุง ูุงูุจุฑ ุฑุจุงุช |
| `bot/states.py` | ุชุนุฑู Stateูุง Form ู Multi-step operations |
| `bot/middlewares/` | ูุฏููุฑูุง ูุงููุฏ AuthMiddleware ุจุฑุง ููุดโูุง |
| `bot/notifications/` | ูุฏุฑุช ุตู ููุชูฺฉุดูุ ุงุทูุงุนโุฑุณุงูุ ูพุงูโูุง |
| `bot/receipts/` | ูุฏุฑุช ุฏุฑุงูุชุ ูุงฺฏ ู ูพุงุณุฎ ุฑุณุฏูุง ฺฉุงุฑุช ุจู ฺฉุงุฑุช |

---

## ๐ง core/

| Path | ููุด |
|------|-----|
| `core/services/` | ููุทู ุจุฒูุณ ูพุฑูฺู (UserService, PaymentService...) |
| `core/integrations/xui_client.py` | ุงุฑุชุจุงุท ุจุง ูพูู 3x-ui ุจุง `py3xui.async_api.AsyncApi` |
| `core/scripts/` | ุงุจุฒุงุฑูุง ุฌุงูุจ ูุซู confirm_payment.pyุ ุชุณุชโูุงุ ุงุจุฒุงุฑูุง ุฏุงุฎู |
| `core/settings.py` | ุชูุธูุงุช ูพฺฉุฑุจูุฏ ูพุฑูฺู |

---

## ๐งฉ db/

| Path | ููุด |
|------|-----|
| `db/models/` | ูุฏูโูุง SQLAlchemy (User, Panel, Inbound, Plan, Receipt, etc.) |
| `db/repositories/` | ุนููุงุช DB ูพฺุฏู ู ุฏุณุชุฑุณ ุณุงุฏูโุชุฑ |
| `db/schemas/` | ุงุณฺฉูุงูุง Pydantic (ุฏุฑ ุตูุฑุช ูุงุฒ) |
| `db/migrations/` | ุณุงุฎุชุงุฑ Alembic ุจุฑุง migration ุฏุชุงุจุณ |
| `db/config.py` | ุงุชุตุงู ุจู ุฏุชุงุจุณ ู ุฑุงูโุงูุฏุงุฒ Base ORM |

---

## ๐งช tests/

| Path | ุชูุถุญ |
|------|------|
| `tests/test_*.py` | ุชุณุช ูุงุญุฏ ุจุฑุง ุณุฑูุณโูุง ู ููุทู ุงุตู |

---

## ๐ docs/

| ูุงู | ฺฉุงุฑุจุฑุฏ |
|------|--------|
| `project-requirements.md` | ูุงุฒููุฏโูุง ูพุฑูฺู (MVP ู ุขูุฏู) |
| `project-structure.md` | ุณุงุฎุชุงุฑ ูพูุดูโูุง ู ูุงูโูุง ูพุฑูฺู |
| `database-structure.md` | ูุฏู ุฏุงุฏูโูุงุ ุฑูุงุจุทุ ูฺฺฏโูุง |
| `project-relationships.md` | ุฌุฑุงู ุงุทูุงุนุงุช ู ุชุนุงูู ุจู ุงุฌุฒุง ุณุณุชู |

---

## ๐ scripts/

| ูุงู | ุชูุถุญ |
|------|------|
| `moonvpn.sh` | ุงุฌุฑุง ุฏุณุชูุฑุงุช CLI: up, down, restart, migrate, logs |
| `add_plans.py`ุ `check_code.py` | ุงุจุฒุงุฑูุง ุชูุณุนู ู ุฑูุน ุฎุทุง ุง ุฏุงุฏู ุงููู |

---

## ๐ฆ ุณุงุฑ ููุงุฑุฏ

| ูุงู/ูพูุดู | ุชูุถุญ |
|------------|------|
| `.cursor/rules/` | ุฑููโูุง ุจุฑุง Cursor AI assistant (ูุฏุฑุช ุฑูุชุงุฑ ูุฏู) |
| `.vscode/` | ุชูุธูุงุช ุชูุณุนู ูุญู ุจุฑุง VS Code |

---

## โ ููุงูู ููู ุณุงุฎุชุงุฑ

- ูฺ ูุงู ุง ุฏุงุฑฺฉุชูุฑ ุฎุงุฑุฌ ุงุฒ ูุณุฑูุง ููู ูุจุงุฏ ุณุงุฎุชู ุดูุฏ.
- ูุฑ ูุงฺูู ุจุงุฏ ููุท ูุธูู ุฎูุฏุด ุฑุง ุงูุฌุงู ุฏูุฏ (Single Responsibility).
- ูุงูโูุง ฺฉู ุจู ุจุด ุงุฒ 300 ุฎุท ุจุฑุณูุฏ ุจุงุฏ ุชูฺฉฺฉ ุดููุฏ.
- ูุณุฑ ุฏุณุชุฑุณ ุจู ูุฑ ูุงฺูู ุจุงุฏ ุดูุงู ุจุงุดุฏ ุชุง ูุฏูโูุง ููุด ูุตููุน ุจูโุฏุฑุณุช ูุงูโูุง ุฑุง ุดูุงุณุง ฺฉููุฏ.
- ูุงูโูุง ุฑุณุฏ ู ูพุฑุฏุงุฎุช ููุท ุฏุฑ `bot/receipts` ู `core/services/payment_service.py` ุจุงุฏ ุชูุณุนู ุงุจูุฏ.
- ุงุฑุชุจุงุท ุจุง ูพูู ููุท ุงุฒ ุทุฑู `core/integrations/xui_client.py` ูุฌุงุฒ ุงุณุช.

